language: shell
os: linux
version: ~> 1.0

jobs:
  include:
    - stage: "Run `check_exercises`"
      name: "nim-stable"
      os: linux
      dist: bionic
      env: CHANNEL=stable

    - name: "nim-devel"
      os: linux
      dist: bionic
      env: CHANNEL=devel

install:
  - sh bin/install-nim.sh
  - export PATH="bin/nim-${CHANNEL}/bin${PATH:+:${PATH}}"
  - nim --version
  - nimble --version

before_script:
  - nim c --styleCheck:hint _test/check_exercises.nim

script:
  - _test/check_exercises
